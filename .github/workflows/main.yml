name: Run Python Script with GitHub Secrets

on: [push]  # 当 push 代码时触发

jobs:
  run-python:
    runs-on: ubuntu-latest  # 在 GitHub 提供的 Ubuntu 服务器上运行
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3  # 获取代码

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.9'  # 选择 Python 版本

      - name: Install dependencies
        run: |
          if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

      - name: Debug Environment Variables  # 输出环境变量，检查 Secrets 是否正确传递
        run: printenv | sort

      - name: Run Python script with secret
        env:
          MAKERSUITE: ${{ secrets.makersuite }}  # 传递 GitHub Secret 到 Python
        run: python app.py
